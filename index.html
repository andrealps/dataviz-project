<!DOCTYPE html>

<head>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/noframework.waypoints.min.js"></script>
    <script src='./firstViz.js'></script>
    <script src='./secondViz.js'></script>
    <link rel="stylesheet" type="text/css" href="https://cloud.typography.com/7124072/6351572/css/fonts.css" />
    <link rel='stylesheet' href='./firstViz.css' />
    <link rel='stylesheet' href='./secondViz.css' />
    <link rel='stylesheet' href='./window.css' />
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet'>
    <!--    <link type="text/css" rel="stylesheet" href="./people.css">-->
</head>

<body>
    <!-- Code from https://codepen.io/JohJakob/pen/YPxgwo -->
    <div class="window">
        <div class="titlebar">
            <div class="buttons">
                <div class="close">
                    <a class="closebutton" href="#"><span><strong>x</strong></span></a>
                    <!-- close button link -->
                </div>
                <div class="minimize">
                    <a class="minimizebutton" href="#"><span><strong>&ndash;</strong></span></a>
                    <!-- minimize button link -->
                </div>
                <div class="zoom">
                    <a class="zoombutton" href="#"><span><strong>+</strong></span></a>
                    <!-- zoom button link -->
                </div>
            </div>
            DataViz Project
            <!-- window title -->
        </div>
        <div class="content">
            <div class="wrap-content">
                <p id="text-evolution" class="text-window-intro">The evolution of</p>
                <div id="text-tecnology-div">
                    <p id="text-technology-letter0">t</p>
                    <p id="text-technology-letter1">e</p>
                    <p id="text-technology-letter2">c</p>
                    <p id="text-technology-letter3">h</p>
                    <p id="text-technology-letter4">n</p>
                    <p id="text-technology-letter5">o</p>
                    <p id="text-technology-letter6">l</p>
                    <p id="text-technology-letter7">o</p>
                    <p id="text-technology-letter8">g</p>
                    <p id="text-technology-letter9">y</p>
                </div>
                <p id="text-past-present-future" class="text-window-intro">Past, Present and Future</p>
                <!-- window content -->
            </div>
        </div>
    </div>

    <div class='library'>
        <div class='library__graphic graphic'>
            <div class='graphic__prose'>
                <p class='trigger' data-step='0'>PREHISTORY <br> <br><span>Undoubtedly, the most famous invention done
                        in the stone age is the wheel, but some may be surprised to discover that the first boats were
                        also created in this period of time. <br><br>
                        In 1700aC the first alphabet was invented and by 100aC, in the iron age, clockmaking was being
                        created and Tales de Mileto had discovered the first signs of electricity
                    </span> </p>

                <p class='trigger' data-step='1'>BEFORE 17000 <br><br>
                    <span>In 1450 the printing press gets invented, allowing mass production and distribution of written
                        text. Between the years of 1600 and 1610, Italian engineer Galileo Galilei comes up with
                        different inventions such as the telescope and the basic thermometer.<br><br>The end of this era
                        is marked by the beginning of modern physics with Isaac Newton’s laws of motion in 1687.</span>
                </p>

                <p class='trigger' data-step='2'>XVII Century<br><br>
                    <span>In 1712 an English inventor by the name of Thomas Newcomen creates a fuel burning engine used
                        for the draining of mines. This invention would go on to be considered as the first steam
                        engine.
                        <br><br>Honorable mentions from this era would be the invention of the first voice synthesizer,
                        which allowed for the recording of sound, and the creation of the binary number system.
                    </span></p>

                <p class='trigger' data-step='3'>XIX Century<br><br>
                    <span>This century brought a great development on locomotion, with the inventions of the steam
                        locomotive as well as the first gasoline-powered car. In 1800 Alessandro Volta creates the first
                        battery, which inspires inventor Nikola Tesla who patents the first electric engine in
                        1888.<br><br>Nevertheless, locomotion was not the only prolific area in this century. Other
                        massive inventions such as Alexander Bell’s telephone and Thomas Edison’s phonograph.
                    </span></p>

                <p class='trigger' data-step='4'>XX Century<br><br>
                    <span>In this century, there are many huge advances such as the color tv and the first cellphone.
                        Humanity also begins to explore space, with the first man on the moon and the first
                        spacecraft.<br><br>This is also the period in which we start seeing a lot of inventions relating
                        to technology. Some of the most important would be the Ethernet in 1973, the World Wide Web in
                        1989 and Wi-Fi in 1997.<br><br>Finally, this is also a century of new devices (CDs, the Walkman,
                        USB drives...) and new software (first Linux version, eBay...)</span></p>

                <p class='trigger' data-step='5'>XXI Century<br><br>
                    <span>This current century has already brought so many new technologies such as
                        tablets, e-books, wireless earphones and even 3D tv. And we are not even halfway through the
                        century!<br><br>Just imagine what type of technologies may have been created when this period is
                        over.
                    </span></p>

                <div class='graphic__vis'>
                    <!--HERE GOES THE SNAKE-->
                </div>

            </div>
        </div>
        <div class="second_viz"></div>
    </div>


    <!-- svg -->
    <script>
        (function () {

            // helper function so we can map over dom selection
            function selectionToArray(selection) {
                var len = selection.length
                var result = []
                for (var i = 0; i < len; i++) {
                    result.push(selection[i])
                }
                return result
            }

            function waypoints() {
                // select elements
                var graphicEl = document.querySelector('.graphic')
                var graphicVisEl = graphicEl.querySelector('.graphic__vis')
                var triggerEls = selectionToArray(graphicEl.querySelectorAll('.trigger'))

                // viewport height
                var viewportHeight = window.innerHeight
                var halfViewportHeight = Math.floor(viewportHeight / 2)

                // a global function creates and handles all the vis + updates
                var graphic = createGraphic('.graphic')

                // handle the fixed/static position of grahpic
                var toggle = function (fixed, bottom) {
                    if (fixed) graphicVisEl.classList.add('is-fixed')
                    else graphicVisEl.classList.remove('is-fixed')

                    if (bottom) graphicVisEl.classList.add('is-bottom')
                    else graphicVisEl.classList.remove('is-bottom')
                }

                // setup a waypoint trigger for each trigger element
                var waypoints = triggerEls.map(function (el) {

                    // get the step, cast as number					
                    var step = +el.getAttribute('data-step')

                    return new Waypoint({
                        element: el, // our trigger element
                        handler: function (direction) {
                            // if the direction is down then we use that number,
                            // else, we want to trigger the previous one
                            var nextStep = direction === 'down' ? step : Math.max(0, step - 1)

                            // tell our graphic to update with a specific step
                            graphic.update(nextStep)
                        },
                        offset: '50%', // trigger halfway up the viewport
                    })
                })

                // enter (top) / exit (bottom) graphic (toggle fixed position)
                var enterWaypoint = new Waypoint({
                    element: graphicEl,
                    handler: function (direction) {
                        var fixed = direction === 'down'
                        var bottom = false
                        toggle(fixed, bottom)
                    },
                })

                var exitWaypoint = new Waypoint({
                    element: graphicEl,
                    handler: function (direction) {
                        var fixed = direction === 'up'
                        var bottom = !fixed
                        toggle(fixed, bottom)
                    },
                    offset: 'bottom-in-view', // waypoints convenience instead of a calculation
                })
            }

            waypoints()

        })()
    </script>

</body>